// Code generated by sqlc-connect (https://github.com/walterwanderley/sqlc-connect). DO NOT EDIT.

package main

import (
    "database/sql"
    "net/http"

    grpcreflect "github.com/bufbuild/connect-grpcreflect-go"
    "go.uber.org/zap"

    {{range .Packages}}{{.Package}}_app "{{ .GoModule}}/{{.SrcPath}}"
    {{.Package}}_v1connect "{{ .GoModule}}/api/{{.Package | SnakeCase}}/v1/v1connect"
	{{end}}
)


func registerHandlers(mux *http.ServeMux, logger *zap.Logger, db *sql.DB) {
    {{range .Packages}}{{.Package}}Service := {{.Package}}_app.NewService(logger, {{if .EmitDbArgument}}{{.Package}}_app.New(), db{{else}}{{.Package}}_app.New(db){{end}})
    {{.Package}}Path, {{.Package}}Handler := {{.Package}}_v1connect.New{{.Package | UpperFirst}}ServiceHandler({{.Package}}Service)
    mux.Handle({{.Package}}Path, {{.Package}}Handler)
	{{end}}

    reflector := grpcreflect.NewStaticReflector(
		{{range .Packages}}{{.Package}}_v1connect.{{.Package | UpperFirst}}ServiceName,
        {{end}}
	)
	mux.Handle(grpcreflect.NewHandlerV1(reflector))
	mux.Handle(grpcreflect.NewHandlerV1Alpha(reflector))
}